"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _glob=require("glob"),_glob2=_interopRequireDefault(_glob),_ndcExecute=require("./ndcExecute"),_ndcExecute2=_interopRequireDefault(_ndcExecute),loadActions=function(e){return new Promise(function(n,t){(0,_glob2["default"])(e+"/**/actions/*.js",{},function(e,r){return e?t(e):void n(r.map(function(e){var n=require(e)["default"];return n.file=e,n}))})})},organize=function(e){for(var n={},t=0,r=e.length;r>t;t++){var o=e[t],u=o.actionName,i=o.file,c=n.hasOwnProperty(u);if(c)throw new Error('Duplicity of action: "'+u+'" on files: "'+i+'" and "'+n[u].file+'"');n[u]=o}return n},ndcActions=function(e){return loadActions(e).then(organize).then(function(e){return e.execute=_ndcExecute2["default"],e})};exports["default"]=ndcActions;